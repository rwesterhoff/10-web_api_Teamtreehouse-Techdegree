function showResults(){var t;checkSortButtons(),0===albums.length?imageGallery.html("<p>We have no search results for <strong>"+searchQuery+"</strong></p>"):($.each(albums,function(e,s){var a=s.id,r=s.name,u=s.thumb,n=s.release_date;t+='<li class="gallery-item">',t+='<a href="">',t+='<img id="'+a+'" src="'+u+'" alt="'+r+'">',t+="</a>",t+="<h2>"+r+"</h2>",t+='<p class="meta">',t+='<time datetime="'+n+'">'+n+"</time>",t+="</p>",t+="</li>"}),imageGallery.html(t))}function stripResults(t){var e=t.albums.items;$.each(e,function(t,e){var s={};s.id=e.id,s.name=e.name,s.thumb=e.images[1].url,$.ajax({url:"https://api.spotify.com/v1/albums/"+e.id,success:function(t){s.release_date=t.release_date},complete:showResults}),albums.push(s)})}function searchAlbums(){searchQuery=input.val(),albums=[],$.ajax({url:"https://api.spotify.com/v1/search",data:{q:searchQuery,type:"album"},success:stripResults})}function setButtons(t){forAttr=t,$("label").attr("data-state","deselected"),$('label[for="'+forAttr+'"]').attr("data-state","selected")}function checkSortButtons(){"name"===sortBy?sortResults(albums,sortByName):sortResults(albums,sortByDate)}function changeSortButtons(){var t=this.id;sortBy=t,setButtons(t),checkSortButtons(),showResults()}function sortByDate(t){t.sort(function(t,e){var s=t.release_date,a=e.release_date;return s<a?-1:s>a?1:0})}function sortByName(t){t.sort(function(t,e){var s=t.name,a=e.name;return s<a?-1:s>a?1:0})}function sortResults(t,e){e(t)}var input=$("#query"),searchQuery,imageGallery=$("#image-gallery"),albums,sortBy=$('input[type="radio"]:checked')[0].id;$(input).keyup(searchAlbums),function t(){var e=sortBy;setButtons(e)}(),$('input[type="radio"').change(changeSortButtons);