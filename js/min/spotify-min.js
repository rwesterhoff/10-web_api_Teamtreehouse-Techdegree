function showDetails(a){var e=a;$.ajax({url:"https://api.spotify.com/v1/albums/"+e,success:function(a){var e=a.artists[0].name,i=a.name,t=a.images[0].url,s=a.release_date,l=a.tracks.items,n="",o="#js-image-overlay",r="#js-close-overlay",c=function(){n+='<div id="js-image-overlay">',n+='<div id="js-overlay-wrapper">',n+='<button id="js-close-overlay" class="close-overlay">Close overlay</button>',n+='<img src="'+t+'" alt="" class="album-artwork">',n+='<section id="js-data-wrapper">',n+="<h1>"+i+"</h1>",n+='<p><span class="visually-hidden">Artist: </span>'+e+"</p>",n+='<p class="meta">Released on ',n+='<time datetime="'+s+'">'+s+"</time>",n+="</p>",n+='<ul class="play-list">',$.each(l,function(a,e){var i=e.name;n+='<li class="album-track">'+i+"</li>"}),n+="</ul>",n+="</section>",n+="</div>",n+="</div>",$("body").prepend(n),$(o).hide(),$(o).fadeIn(400)},u=function(){$(r).click(function(){m()}),$(document).keyup(function(a){27===a.keyCode&&m()}),window.onclick=function(a){var e=a.target.id;"js-image-overlay"===e&&m()}},m=function(){function a(){$(o).remove()}$(o).fadeOut(400),setTimeout(a,400),$(document).off("keydown")};c(),u()}})}function searchAlbums(){var a=$input.val();$.ajax({url:"https://api.spotify.com/v1/search",data:{q:a,type:"album"},success:function(e){var i=e.albums.items,t="",s=function(){0===i.length?imageGallery.html("<p>We have no search results for <strong>"+a+"</strong></p>"):($.each(i,function(a,e){var i=e.id,s=e.name,l=e.images[1].url;t+='<li class="gallery-item">',t+='<a href="">',t+='<img id="'+i+'" src="'+l+'" alt="'+s+'">',t+="</a>",t+="</li>"}),imageGallery.html(t))},l=function(){$("a").click(function(a){var e=$(this).find("img").attr("id");a.preventDefault(),showDetails(e)})};s(),l()}})}var $input=$("#query"),imageGallery=$("#image-gallery");$($input).keyup(function(){searchAlbums()});