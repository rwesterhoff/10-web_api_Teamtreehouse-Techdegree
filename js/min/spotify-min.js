function getItunesData(e,a){var t=(e+"+"+a).replace(/ /g,"+").toLowerCase(),s="#itunes-button",o=function(e){$.ajax({url:"https://itunes.apple.com/search/?term="+e,type:"GET",dataType:"jsonp",success:function(e){var a=e.results[0].collectionViewUrl;$(s).attr("href",a)},error:function(){alert('error on "getAlbumId"')}})};o(t)}function showDetails(e){var a=e;$.ajax({url:"https://api.spotify.com/v1/albums/"+a,success:function(e){var a=e.artists[0].name,t=e.name,s=e.images[0].url,o=e.release_date,n=e.tracks.items,l="",i="#js-image-overlay",r="#js-close-overlay",c=function(){l+='<div id="js-image-overlay">',l+='<div id="js-overlay-wrapper">',l+='<button id="js-close-overlay" class="close-overlay">Close overlay</button>',l+='<img src="'+s+'" alt="" class="album-artwork">',l+='<section id="js-data-wrapper">',l+="<h1>"+t+"</h1>",l+="<p>By "+a+"</p>",l+='<p class="meta">Released on ',l+='<time datetime="'+o+'">'+o+"</time>",l+="</p>",l+='<ul class="play-list">',$.each(n,function(e,a){var t=a.name;l+='<li class="album-track">'+t+"</li>"}),l+='<a id="itunes-button" href="" class="cta-button">',l+='<img src="assets/itunes-badge.svg" alt="Get it oniTunes">',l+="</a>",l+="</ul>",l+="</section>",l+="</div>",l+="</div>",$("body").prepend(l),$(i).hide(),$(i).fadeIn(400),getItunesData(a,t)},u=function(){$(r).click(function(){m()}),$(document).keyup(function(e){27===e.keyCode&&m()}),window.onclick=function(e){var a=e.target.id;"js-image-overlay"===a&&m()}},m=function(){function e(){$(i).remove()}$(i).fadeOut(400),setTimeout(e,400),$(document).off("keydown")};c(),u()}})}function getReleaseDate(e){var a=e;$.ajax({url:"https://api.spotify.com/v1/albums/"+a,success:function(e){var a=e.release_date;console.log(a)}})}function searchAlbums(){var e=$input.val();$.ajax({url:"https://api.spotify.com/v1/search",data:{q:e,type:"album"},success:function(a){var t=a.albums.items,s="",o=function(){0===t.length?imageGallery.html("<p>We have no search results for <strong>"+e+"</strong></p>"):($.each(t,function(e,a){var t=a.id,o=a.name,n=getReleaseDate(t),l=a.images[1].url,i={id:t,name:o,release_date:n,thumb:l};albums.push(i),s+='<li class="gallery-item">',s+='<a href="">',s+='<img id="'+t+'" src="'+l+'" alt="'+o+'">',s+="</a>",s+="<h2>"+o+"</h2>",s+='<p class="meta">',s+='<time datetime="'+n+'">'+n+"</time>",s+="</p>",s+="</li>"}),imageGallery.html(s))},n=function(){$("a").click(function(e){var a=$(this).find("img").attr("id");e.preventDefault(),showDetails(a)})};o(),n(),console.log(albums)}})}function sortByDate(e){e.sort(function(e,a){var t=e.date,s=a.date;return t<s?(console.log("Compared "+t+" + "+s+", "+t+" = smaller"),-1):t>s?(console.log("Compared "+t+" + "+s+", "+s+" = smaller"),1):(console.log("dates equal"),0)}),console.log("Sorted by date:"),console.log(e)}function sortByName(e){e.sort(function(e,a){var t=e.name,s=a.name;return t<s?-1:t>s?1:0}),console.log("Sorted by name:"),console.log(e)}var $input=$("#query"),imageGallery=$("#image-gallery"),albums=[];$($input).keyup(function(){searchAlbums()}),$('input[type="radio"').change(function(){var e=this.id;$("label").attr("data-state","deselected"),$('label[for="'+e+'"]').attr("data-state","selected")});var test=[{name:"John",date:3},{name:"Zoe",date:1},{name:"Miranda",date:2}];sortByName(test),console.log(albums);